@page "/categories"
@inject CategoriesService CategoriesService

<h1>Categories</h1>

<button @onclick="LoadCategories">Load Categories</button>

<ul>
    @foreach (var category in categories)
    {
        <li>@category.Name - @category.Description <button @onclick="() => DeleteCategory(category.CategoryId)">Delete</button></li>
    }
</ul>

@code {
    private List<Categories> categories = new List<Categories>();

    private async Task LoadCategories()
    {
        categories = await CategoriesService.GetCategoriesAsync();
    }

    private async Task DeleteCategory(int id)
    {
        await CategoriesService.DeleteCategoryAsync(id);
        await LoadCategories(); // Refresh the list
    }
}